# n8n Configuration
# Copy this file to .env and fill in the values

# === Core ===
N8N_HOST=n8n.example.com                #<= change to your domain
N8N_PROTOCOL=https
N8N_PORT=5678
DOMAIN_NAME=n8n.example.com             #<= change to your domain
WEBHOOK_URL=https://n8n.example.com/    #<= change to your domain
N8N_TRUST_PROXY=true

# === Locale ===
GENERIC_TIMEZONE=UTC                    #<= change to your timezone (e.g. Europe/Moscow)

# === Security ===
# Generate with: openssl rand -hex 16 
# Or use your own strong key
# WARNING: If you change this key, you will lose access to all saved credentials!

N8N_ENCRYPTION_KEY=your-super-secret-and-long-password                  #<= change to a strong random key!
#N8N_USER_MANAGEMENT_JWT_SECRET=7ec920d1cee5255e37b26681afd74be4        #<= set if using JWT auth
N8N_SECURE_COOKIE=true
N8N_BLOCK_ENV_ACCESS_IN_NODE=true
N8N_BLOCK_FILE_ACCESS_TO_N8N_FILES=true                                 # Restrict file access
N8N_RESTRICT_FILE_ACCESS_TO=/files;/backup                              # Allow only these folders
NODES_EXCLUDE=[]                                                        # 
NODE_FUNCTION_ALLOW_BUILTIN=crypto                                      # Allow built-in crypto module

# === Performance ===  
EXECUTIONS_TIMEOUT=3600
N8N_RUNNERS_ENABLED=false  # Disabled to save RAM
NODE_OPTIONS=--max-old-space-size=256  # Memory Limit

# === Disable diagnostics ===
N8N_DIAGNOSTICS_ENABLED=false
N8N_PERSONALIZATION_ENABLED=false
#N8N_METRICS=true
#QUEUE_HEALTH_CHECK_ACTIVE=true

# === Database (Postgres) ===
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=n8n-db
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_DATABASE=${POSTGRES_DB}
DB_POSTGRESDB_SCHEMA=n8n
DB_POSTGRESDB_USER=${POSTGRES_NON_ROOT_USER}
DB_POSTGRESDB_PASSWORD=${POSTGRES_NON_ROOT_PASSWORD}

# === Postgres Configuration ===
POSTGRES_USER=postgres_user                 #<= change to a custom superuser name
POSTGRES_PASSWORD=postgres_password         #<= change to a STRONG password (superuser)
POSTGRES_DB=n8n

POSTGRES_NON_ROOT_USER=n8n                  #<= change to a custom app user name
POSTGRES_NON_ROOT_PASSWORD=n8n_password     #<= change to a STRONG password (n8n user)
